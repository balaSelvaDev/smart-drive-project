<!-- <p>customer-login-popup works!</p>
<p>view-booking-price works!</p>
<h2 mat-dialog-title>Received Data</h2>
<div mat-dialog-content>
    <p><strong>Name:</strong> {{ data.name }}</p>
    <p><strong>Age:</strong> {{ data.age }}</p>
    <p><strong>Location:</strong> {{ data.location }}</p>
</div>
<div mat-dialog-actions align="end">
    <button mat-button (click)="closeDialog()">Close</button>
</div> -->
<div style="padding: 20px;">
    <div style="display: flex; justify-content: center; align-items: center; height: 100%;">
        <div class="login-popup"
            style="width: 100%;height: 100%;display: flex; justify-content: center; align-items: center;">
            <img src="https://www.zoomcar.com/build/fb65fcc43b8bededb813e093ea2d47d3.svg" alt="Login Icon"
                style="width: 440px;height: 440px;object-fit: cover;">
        </div>
        <div style="width: 100%;height: 100%;">
            <div class="login-popup" style="width: 100%;height: 100%;padding: 14px;">
                <div id="registration-section" *ngIf="isRegistrationSectionVisible">
                    <form (ngSubmit)="onSubmit()" [formGroup]="registrationForm">
                        <h2>Registration</h2>
                        <div>
                            <div style="margin: 16px 0px;">
                                <label for="first-name">First name</label>
                                <input type="text" id="first-name" formControlName="firstName"
                                    placeholder="Enter your first name" class="form-control" autocomplete="off">
                            </div>
                            <div style="margin: 16px 0px;">
                                <label for="last-name">Last name</label>
                                <input type="text" id="last-name" formControlName="lastName"
                                    placeholder="Enter your last name" class="form-control" autocomplete="off">
                            </div>
                            <div style="margin: 16px 0px;">
                                <label for="email">Email</label>
                                <input type="text" id="email" formControlName="email" placeholder="Enter your email"
                                    class="form-control" autocomplete="off">
                            </div>
                            <div style="margin: 16px 0px;">
                                <label for="phone">Phone number</label>
                                <input type="text" id="phone" formControlName="phoneNumber"
                                    placeholder="Enter your phone number" class="form-control" autocomplete="off">
                            </div>
                        </div>
                        <div mat-dialog-actions align="end">
                            <button mat-button (click)="closeDialog()">Close</button>
                            <button type="submit">Register</button>
                            <!-- <button mat-button (click)="changeToVerification()">Change to Verification</button>
                            <button mat-button (click)="changeToPassword()">Change to Password</button> -->
                        </div>
                    </form>
                </div>
                <div id="registration-verification-section" *ngIf="isRegistrationVerificationSectionVisible">
                    <form (ngSubmit)="onSubmitVerification()" [formGroup]="verificationForm">
                        <div>
                            <h1>Verify your Email id</h1>
                            <p>OTP has been sent to {{this.registrationResponse.emailId}} <strong>Edit</strong></p>
                            <div>
                                <div style="margin: 16px 0px;">
                                    <label for="otp">Enter OTP</label>
                                    <input type="text" id="otp" formControlName="code"
                                        placeholder="Enter the OTP sent to your email" class="form-control"
                                        autocomplete="off">
                                </div>
                            </div>
                            <div mat-dialog-actions align="end">
                                <div style="display: flex;">
                                    <p>Time left: {{ formattedTime }}</p>
                                    <button *ngIf="isTimerFinished" (click)="resetTimer()" class="reset-button">
                                        Reset Code
                                    </button>
                                </div>
                            </div>
                            <div mat-dialog-actions align="end">
                                <button mat-button (click)="closeDialog()">Close</button>
                                <button type="submit">Register</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div id="password-section" *ngIf="isPasswordSectionVisible">
                    <form (ngSubmit)="onSubmitPassword()" [formGroup]="passwordForm" novalidate>
                        <h2>Set Password</h2>

                        <!-- Password -->
                        <div style="margin: 16px 0;">
                            <label for="password">Password</label>
                            <div style="position: relative;">
                                <input [type]="hidePassword ? 'password' : 'text'" id="password"
                                    formControlName="password" placeholder="Enter your password" class="form-control"
                                    autocomplete="off" />
                                <button type="button" (click)="hidePassword = !hidePassword"
                                    style="position: absolute; right: 8px; top: 8px;">
                                    {{ hidePassword ? 'Show' : 'Hide' }}
                                </button>
                            </div>
                            <div *ngIf="password?.touched && password?.invalid" class="error">
                                <small *ngIf="password?.errors?.['required']">Password is required.</small>
                                <small *ngIf="password?.errors?.['minlength']">Must be at least 8 characters.</small>
                                <small *ngIf="password?.errors?.['pattern']">Must include 1 number and 1 special
                                    character.</small>
                            </div>
                        </div>

                        <!-- Confirm Password -->
                        <div style="margin: 16px 0;">
                            <label for="confirm-password">Confirm Password</label>
                            <div style="position: relative;">
                                <input [type]="hideConfirmPassword ? 'password' : 'text'" id="confirm-password"
                                    formControlName="confirmPassword" placeholder="Confirm your password"
                                    class="form-control" autocomplete="off" />
                                <button type="button" (click)="hideConfirmPassword = !hideConfirmPassword"
                                    style="position: absolute; right: 8px; top: 8px;">
                                    {{ hideConfirmPassword ? 'Show' : 'Hide' }}
                                </button>
                            </div>
                            <div *ngIf="confirmPassword?.touched && confirmPassword?.invalid" class="error">
                                <small *ngIf="confirmPassword?.errors?.['required']">Confirm password is
                                    required.</small>
                            </div>
                            <div *ngIf="passwordForm.errors?.['mismatch'] && confirmPassword?.touched" class="error">
                                <small>Passwords do not match.</small>
                            </div>
                        </div>

                        <!-- Buttons -->
                        <div style="text-align: right; margin-top: 16px;">
                            <button type="button" (click)="closeDialog()">Close</button>
                            <button type="submit" [disabled]="passwordForm.invalid">Set Password</button>
                        </div>
                    </form>

                    <!-- <hr>
            <footer class="login-container__footer">
                By continuing, you agree to Zoomcar's
                <a href="#">
                    Privacy Policy
                </a>
                &amp;
                <a href="#">
                    Terms of Use
                </a>
            </footer> -->
                </div>
                <div id="registration-section" *ngIf="isLoginSectionVisible">
                    <form (ngSubmit)="onSubmitLogin()" [formGroup]="loginForm">
                        <h2>Login</h2>
                        <div>
                            <div style="margin: 16px 0px;">
                                <label for="email">Email</label>
                                <input type="text" id="email" formControlName="emailId" placeholder="Enter your email"
                                    class="form-control" autocomplete="off">
                            </div>
                            <div style="margin: 16px 0px;">
                                <label for="password">Password</label>
                                <input type="password" id="password" formControlName="password"
                                    placeholder="Enter your password" class="form-control" autocomplete="off">
                            </div>
                        </div>
                        <div mat-dialog-actions align="end">
                            <button mat-button (click)="closeDialog()">Close</button>
                            <button type="submit">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
            <div style="display: flex; justify-content: center; align-items: center;">
                <button mat-button color="primary" (click)="openLogin()">Login</button>
            </div>
            <!-- google-login-button.component.html -->
            <button class="google-btn" (click)="loginWithGoogle()">
                <!-- (click)="loginWithGoogle()" -->
                <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google logo" />
                <span>Sign in with Google</span>
            </button>
        </div>
    </div>